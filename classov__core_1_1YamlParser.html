<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ov_core::YamlParser class | OpenVINS</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600&amp;subset=latin-ext" />
  <link rel="stylesheet" href="m-udel+documentation.compiled.css" />
  <link rel="stylesheet" href="custom.css" />
  <link rel="icon" href="favicon-light.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#2f73a3" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">OpenVINS</a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="namespaceov__core.html">ov_core</a></li>
            <li><a href="namespaceov__type.html">ov_type</a></li>
            <li><a href="namespaceov__msckf.html">ov_msckf</a></li>
            <li><a href="namespaceov__init.html">ov_init</a></li>
            <li><a href="namespaceov__eval.html">ov_eval</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="8">
            <li><a href="https://github.com/rpng/open_vins/">GitHub</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <span class="m-breadcrumb"><a href="namespaceov__core.html">ov_core</a>::<wbr/></span>YamlParser <span class="m-thin">class</span>
        </h1>
        <p>Helper class to do OpenCV yaml parsing from both file and ROS.</p>
        <div class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#typeless-methods">Constructors, destructors, conversion operators</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
              </ul>
            </li>
          </ul>
        </div>
<p>The logic is as follows:</p><ul><li>Given a path to the main config file we will load it into our <a href="https://docs.opencv.org/4.x/da/d56/classcv_1_1FileStorage.html">cv::<wbr />FileStorage</a> object.</li><li>From there the user can request for different parameters of different types from the config.</li><li>If we have ROS, then we will also check to see if the user has overridden any config files via ROS.</li><li>The ROS parameters always take priority over the ones in our config.</li></ul><p>NOTE: There are no &quot;nested&quot; yaml parameters. They are all under the &quot;root&quot; of the yaml file!!! This limits things quite a bit, but simplified the below implementation.</p><p>NOTE: The camera and imu have nested, but those are handled externally. They first read the &quot;imu0&quot; or &quot;cam1&quot; level, after-which all values are at the same level.</p>
        <section id="typeless-methods">
          <h2><a href="#typeless-methods">Constructors, destructors, conversion operators</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper"><a href="#a4f4acc860b546d60f422a07d60eaa99b" class="m-doc">YamlParser</a>(</span><span class="m-doc-wrap">const std::string&amp; config_path,
              bool fail_if_not_found = true) <span class="m-label m-flat m-info">explicit</span> </span>
            </dt>
            <dd>Constructor that loads all three configuration files.</dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a76a8ca471859dd6fd22e1772c3d1aa44" class="m-doc">get_config_folder</a>(</span><span class="m-doc-wrap">) -&gt; std::string</span>
            </dt>
            <dd>Will get the folder this config file is in.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a05ee1de4577cdd64ad91a3f11c372714" class="m-doc">successful</a>(</span><span class="m-doc-wrap">) const -&gt; bool</span>
            </dt>
            <dd>Check to see if all parameters were read succesfully.</dd>
            <dt>
              <div class="m-doc-template">template&lt;class T&gt;</div>
              <span class="m-doc-wrap-bumper">void <a href="#aff9bc745ae8097ece9807ec4d0fbec2f" class="m-doc">parse_config</a>(</span><span class="m-doc-wrap">const std::string&amp; node_name,
              T&amp; node_result,
              bool required = true)</span>
            </dt>
            <dd>Custom parser for the ESTIMATOR parameters.</dd>
            <dt>
              <div class="m-doc-template">template&lt;class T&gt;</div>
              <span class="m-doc-wrap-bumper">void <a href="#ac955d674ec792557a9f53a4b613af0cb" class="m-doc">parse_external</a>(</span><span class="m-doc-wrap">const std::string&amp; external_node_name,
              const std::string&amp; sensor_name,
              const std::string&amp; node_name,
              T&amp; node_result,
              bool required = true)</span>
            </dt>
            <dd>Custom parser for the external parameter files with levels.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a72bdbe517f63793e36e8ec8faacfc9f5" class="m-doc">parse_external</a>(</span><span class="m-doc-wrap">const std::string&amp; external_node_name,
              const std::string&amp; sensor_name,
              const std::string&amp; node_name,
              Eigen::Matrix3d&amp; node_result,
              bool required = true)</span>
            </dt>
            <dd>Custom parser for Matrix3d in the external parameter files with levels.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a09a826b21ab5de606a5c82472e957e8c" class="m-doc">parse_external</a>(</span><span class="m-doc-wrap">const std::string&amp; external_node_name,
              const std::string&amp; sensor_name,
              const std::string&amp; node_name,
              Eigen::Matrix4d&amp; node_result,
              bool required = true)</span>
            </dt>
            <dd>Custom parser for Matrix4d in the external parameter files with levels.</dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="a4f4acc860b546d60f422a07d60eaa99b"><div>
            <h3>
              <span class="m-doc-wrap-bumper"> ov_core::<wbr />YamlParser::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a4f4acc860b546d60f422a07d60eaa99b" class="m-doc-self">YamlParser</a>(</span><span class="m-doc-wrap">const std::string&amp; config_path,
              bool fail_if_not_found = true) <span class="m-label m-info">explicit</span> </span></span>
            </h3>
            <p>Constructor that loads all three configuration files.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">config_path</td>
                  <td>Path to the YAML file we will parse</td>
                </tr>
                <tr>
                  <td>fail_if_not_found</td>
                  <td>If we should terminate the program if we can&#x27;t open the config file</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-doc-details" id="a76a8ca471859dd6fd22e1772c3d1aa44"><div>
            <h3>
              <span class="m-doc-wrap-bumper">std::string ov_core::<wbr />YamlParser::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a76a8ca471859dd6fd22e1772c3d1aa44" class="m-doc-self">get_config_folder</a>(</span><span class="m-doc-wrap">)</span></span>
            </h3>
            <p>Will get the folder this config file is in.</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>Config folder</td>
                </tr>
              </tfoot>
            </table>
          </div></section>
          <section class="m-doc-details" id="a05ee1de4577cdd64ad91a3f11c372714"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool ov_core::<wbr />YamlParser::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a05ee1de4577cdd64ad91a3f11c372714" class="m-doc-self">successful</a>(</span><span class="m-doc-wrap">) const</span></span>
            </h3>
            <p>Check to see if all parameters were read succesfully.</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>True if we found all parameters</td>
                </tr>
              </tfoot>
            </table>
          </div></section>
          <section class="m-doc-details" id="aff9bc745ae8097ece9807ec4d0fbec2f"><div>
            <h3>
              <div class="m-doc-template">
                template&lt;class T&gt;
              </div>
              <span class="m-doc-wrap-bumper">void ov_core::<wbr />YamlParser::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#aff9bc745ae8097ece9807ec4d0fbec2f" class="m-doc-self">parse_config</a>(</span><span class="m-doc-wrap">const std::string&amp; node_name,
              T&amp; node_result,
              bool required = true)</span></span>
            </h3>
            <p>Custom parser for the ESTIMATOR parameters.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Template parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">T</td>
                  <td>Type of parameter we are looking for.</td>
                </tr>
              </tbody>
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td>node_name</td>
                  <td>Name of the node</td>
                </tr>
                <tr>
                  <td>node_result</td>
                  <td>Resulting value (should already have default value in it)</td>
                </tr>
                <tr>
                  <td>required</td>
                  <td>If this parameter is required by the user to set</td>
                </tr>
              </tbody>
            </table>
<p>This will load the data from the main config file. If it is unable it will give a warning to the user it couldn&#x27;t be found.</p>
          </div></section>
          <section class="m-doc-details" id="ac955d674ec792557a9f53a4b613af0cb"><div>
            <h3>
              <div class="m-doc-template">
                template&lt;class T&gt;
              </div>
              <span class="m-doc-wrap-bumper">void ov_core::<wbr />YamlParser::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ac955d674ec792557a9f53a4b613af0cb" class="m-doc-self">parse_external</a>(</span><span class="m-doc-wrap">const std::string&amp; external_node_name,
              const std::string&amp; sensor_name,
              const std::string&amp; node_name,
              T&amp; node_result,
              bool required = true)</span></span>
            </h3>
            <p>Custom parser for the external parameter files with levels.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Template parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">T</td>
                  <td>Type of parameter we are looking for.</td>
                </tr>
              </tbody>
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td>external_node_name</td>
                  <td>Name of the node we will get our relative path from</td>
                </tr>
                <tr>
                  <td>sensor_name</td>
                  <td>The first level node we will try to get the requested node under</td>
                </tr>
                <tr>
                  <td>node_name</td>
                  <td>Name of the node</td>
                </tr>
                <tr>
                  <td>node_result</td>
                  <td>Resulting value (should already have default value in it)</td>
                </tr>
                <tr>
                  <td>required</td>
                  <td>If this parameter is required by the user to set</td>
                </tr>
              </tbody>
            </table>
<p>This will first load the external file requested. From there it will try to find the first level requested (e.g. imu0, cam0, cam1). Then the requested node can be found under this sensor name. ROS can override the config with <code>&lt;sensor_name&gt;_&lt;node_name&gt;</code> (e.g., cam0_distortion).</p>
          </div></section>
          <section class="m-doc-details" id="a72bdbe517f63793e36e8ec8faacfc9f5"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void ov_core::<wbr />YamlParser::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a72bdbe517f63793e36e8ec8faacfc9f5" class="m-doc-self">parse_external</a>(</span><span class="m-doc-wrap">const std::string&amp; external_node_name,
              const std::string&amp; sensor_name,
              const std::string&amp; node_name,
              Eigen::Matrix3d&amp; node_result,
              bool required = true)</span></span>
            </h3>
            <p>Custom parser for Matrix3d in the external parameter files with levels.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">external_node_name</td>
                  <td>Name of the node we will get our relative path from</td>
                </tr>
                <tr>
                  <td>sensor_name</td>
                  <td>The first level node we will try to get the requested node under</td>
                </tr>
                <tr>
                  <td>node_name</td>
                  <td>Name of the node</td>
                </tr>
                <tr>
                  <td>node_result</td>
                  <td>Resulting value (should already have default value in it)</td>
                </tr>
                <tr>
                  <td>required</td>
                  <td>If this parameter is required by the user to set</td>
                </tr>
              </tbody>
            </table>
<p>This will first load the external file requested. From there it will try to find the first level requested (e.g. imu0, cam0, cam1). Then the requested node can be found under this sensor name. ROS can override the config with <code>&lt;sensor_name&gt;_&lt;node_name&gt;</code> (e.g., cam0_distortion).</p>
          </div></section>
          <section class="m-doc-details" id="a09a826b21ab5de606a5c82472e957e8c"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void ov_core::<wbr />YamlParser::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a09a826b21ab5de606a5c82472e957e8c" class="m-doc-self">parse_external</a>(</span><span class="m-doc-wrap">const std::string&amp; external_node_name,
              const std::string&amp; sensor_name,
              const std::string&amp; node_name,
              Eigen::Matrix4d&amp; node_result,
              bool required = true)</span></span>
            </h3>
            <p>Custom parser for Matrix4d in the external parameter files with levels.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">external_node_name</td>
                  <td>Name of the node we will get our relative path from</td>
                </tr>
                <tr>
                  <td>sensor_name</td>
                  <td>The first level node we will try to get the requested node under</td>
                </tr>
                <tr>
                  <td>node_name</td>
                  <td>Name of the node</td>
                </tr>
                <tr>
                  <td>node_result</td>
                  <td>Resulting value (should already have default value in it)</td>
                </tr>
                <tr>
                  <td>required</td>
                  <td>If this parameter is required by the user to set</td>
                </tr>
              </tbody>
            </table>
<p>This will first load the external file requested. From there it will try to find the first level requested (e.g. imu0, cam0, cam1). Then the requested node can be found under this sensor name. ROS can override the config with <code>&lt;sensor_name&gt;_&lt;node_name&gt;</code> (e.g., cam0_distortion).</p>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v1.js"></script>
<script src="searchdata-v1.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Generated by <a href="https://doxygen.org/">Doxygen</a> 1.8.20 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
